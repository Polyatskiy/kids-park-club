# Инструкция по исправлению проблемы SECURITY DEFINER

## Что нужно сделать:

### Вариант 1: Через Supabase Dashboard (РЕКОМЕНДУЕТСЯ)

1. Откройте https://supabase.com/dashboard
2. Выберите ваш проект "Kids Park Club"
3. В левом меню нажмите **"SQL Editor"**
4. Нажмите **"New query"** (или кнопку "+")
5. Вставьте следующий SQL-код:

```sql
-- Удаление представления с проблемой SECURITY DEFINER
DROP VIEW IF EXISTS categories_with_translations CASCADE;
```

6. Нажмите **"Run"** (или `Ctrl+Enter` / `Cmd+Enter`)
7. Дождитесь сообщения "Success. No rows returned"

### Вариант 2: Через Supabase CLI (если установлен)

1. Откройте терминал в папке проекта
2. Выполните команду:
```bash
supabase db push
```

Или если нужно применить конкретную миграцию:
```bash
supabase migration up
```

## Проверка результата:

После выполнения SQL-запроса:

1. В SQL Editor выполните проверочный запрос:
```sql
SELECT * FROM information_schema.views 
WHERE table_name = 'categories_with_translations';
```

2. Если запрос вернул 0 строк - представление успешно удалено ✅

3. Проверьте линтер безопасности - предупреждение должно исчезнуть

## Что делает этот SQL:

- `DROP VIEW IF EXISTS` - удаляет представление, если оно существует
- `CASCADE` - автоматически удаляет зависимые объекты (если есть)
- Это безопасно, так как представление не используется в коде приложения

## Важно:

- Это представление **не используется** в вашем коде
- Приложение работает напрямую с таблицами через Supabase client
- Удаление представления **не повлияет** на работу сайта

